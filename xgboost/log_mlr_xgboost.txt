> library(data.table)
data.table 1.9.8
  The fastest way to learn (by data.table authors): https://www.datacamp.com/courses/data-analysis-the-data-table-way
  Documentation: ?data.table, example(data.table) and browseVignettes("data.table")
  Release notes, videos and slides: http://r-datatable.com
> library(mlr)
载入需要的程辑包：ParamHelpers
Warning messages:
1: 程辑包‘mlr’是用R版本3.3.3 来建造的 
2: 程辑包‘ParamHelpers’是用R版本3.3.3 来建造的 
> library(xgboost)
Warning message:
程辑包‘xgboost’是用R版本3.3.3 来建造的 
> library(caret)
载入需要的程辑包：lattice
载入需要的程辑包：ggplot2

载入程辑包：‘caret’

The following object is masked from ‘package:mlr’:

    train

> train <- fread("E:/R/imbalancedata/train.csv",na.string=c(""," ","?","NA",NA))
> test <- fread("E:/R/imbalancedata/test.csv",na.string=c(""," ","?","NA",NA))
> setDT(train)
> setDT(test)
> char_cols <- colnames(train)[sapply(train,is.character)]
> for(i in char_cols) set(train,j=i,value = factor(train[[i]]))
> for(i in char_cols) set(test,j=i,value = factor(test[[i]]))
> train_task <- makeClassifTask(data = train, target = "income_level")
Warning in makeTask(type = type, data = data, weights = weights, blocking = blocking,  :
  Provided data is not a pure data.frame but from class data.table, hence it will be converted.
> test_task <- makeClassifTask(data = test, target = "income_level")
Warning in makeTask(type = type, data = data, weights = weights, blocking = blocking,  :
  Provided data is not a pure data.frame but from class data.table, hence it will be converted.
> train_task <- createDummyFeatures(obj = train_task)
> train_task <- createDummyFeatures(obj = train_task)
> set.seed(2002)
> xgb_learner <- makeLearner("classif.xgboost",predict.type = "response")
> xgb_learner$par.vals <- list(
+   objective = "binary:logistic",
+   eval_metric = "error",
+   nrounds = 150,
+   print.every.n = 50)
> xg_ps <- makeParamSet( 
+   makeIntegerParam("max_depth",lower=3,upper=10),
+   makeNumericParam("lambda",lower=0.05,upper=0.5),
+   makeNumericParam("eta", lower = 0.01, upper = 0.5),
+   makeNumericParam("subsample", lower = 0.50, upper = 1),
+   makeNumericParam("min_child_weight",lower=2,upper=10),
+   makeNumericParam("colsample_bytree",lower = 0.50,upper = 0.80))
> rancontrol <- makeTuneControlRandom(maxit = 5L) #do 5 iterations
> set_cv <- makeResampleDesc("CV",iters = 5L,stratify = TRUE)
> library(parallel)
> library(parallelMap)
> parallelStartSocket(cpus = detectCores())
Starting parallelization in mode=socket with cpus=4.
> xgb_tune <- tuneParams(learner = xgb_learner, task = train_task, resampling = set_cv, 
+                        measures = list(acc,tpr,tnr,fpr,fp,fn), par.set = xg_ps, 
+                        control = rancontrol)
[Tune] Started tuning learner classif.xgboost for parameter set:
                    Type len Def      Constr Req Tunable Trafo
max_depth        integer   -   -     3 to 10   -    TRUE     -
lambda           numeric   -   - 0.05 to 0.5   -    TRUE     -
eta              numeric   -   - 0.01 to 0.5   -    TRUE     -
subsample        numeric   -   -    0.5 to 1   -    TRUE     -
min_child_weight numeric   -   -     2 to 10   -    TRUE     -
colsample_bytree numeric   -   -  0.5 to 0.8   -    TRUE     -
With control class: TuneControlRandom
Imputation value: -0Imputation value: -0Imputation value: -0Imputation value: 1Imputation value: InfImputation value: Inf
Exporting objects to slaves for mode socket: .mlr.slave.options
Mapping in parallel: mode = socket; cpus = 4; elements = 5.
[Tune] Result: max_depth=5; lambda=0.171; eta=0.295; subsample=0.855; min_child_weight=5.54; colsample_bytree=0.735 : acc.test.mean=0.958,tpr.test.mean=0.989,tnr.test.mean=0.482,fpr.test.mean=0.518,fp.test.mean=1.28e+03,fn.test.mean= 413
> xgb_tune$y
acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean 
    0.9575036     0.9889762     0.4818275     0.5181725  1283.2000000   412.6000000 
> xgb_new <- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)
> xgb_model <- train(xgb_new, train_task)
Loading required package: randomForest
randomForest 4.6-12
Type rfNews() to see new features/changes/bug fixes.

Attaching package: ‘randomForest’

The following object is masked from ‘package:ggplot2’:

    margin

Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_model <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_model <- train(learner = xgb_new, task = train_task)
Error in train.default(learner = xgb_new, task = train_task) : 
  argument "y" is missing, with no default
> xgb_tune$y
acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean 
    0.9575036     0.9889762     0.4818275     0.5181725  1283.2000000   412.6000000 
> xgb_tune$x
$max_depth
[1] 5

$lambda
[1] 0.1711398

$eta
[1] 0.295421

$subsample
[1] 0.8545802

$min_child_weight
[1] 5.541689

$colsample_bytree
[1] 0.7345529

> xgb_new <- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)
> xgb_model <- train(learner = xgb_new, task = train_task)
Error in train.default(learner = xgb_new, task = train_task) : 
  argument "y" is missing, with no default
> xgb_model <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_tune$y
acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean 
    0.9575036     0.9889762     0.4818275     0.5181725  1283.2000000   412.6000000 
> xgb_new <- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)
> xgb_model <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> rm(xgb_new)
> xgb_new <- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)
> xgb_model <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_tune$y
acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean 
    0.9575036     0.9889762     0.4818275     0.5181725  1283.2000000   412.6000000 
> xgb_new <- setHyperPars(xgb_learner, par.vals = xgb_tune$x)
> xgb_model <- train(learner = xgb_new, task = train_task)
Error in train.default(learner = xgb_new, task = train_task) : 
  argument "y" is missing, with no default
> xgb_model <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_tune$y
acc.test.mean tpr.test.mean tnr.test.mean fpr.test.mean  fp.test.mean  fn.test.mean 
    0.9575036     0.9889762     0.4818275     0.5181725  1283.2000000   412.6000000 
> xgb_new <- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)
> xgmodel <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_tune
Tune result:
Op. pars: max_depth=5; lambda=0.171; eta=0.295; subsample=0.855; min_child_weight=5.54; colsample_bytree=0.735
acc.test.mean=0.958,tpr.test.mean=0.989,tnr.test.mean=0.482,fpr.test.mean=0.518,fp.test.mean=1.28e+03,fn.test.mean= 413
> xgb_new <- setHyperPars(learner = xgb_learner, par.vals = xgb_tune$x)
> xgmodel <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_new <- setHyperPars(makeLearner("classif.xgboost"), par.vals = xgb_tune$x)
> xgmodel <- train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_new
Learner classif.xgboost from package xgboost
Type: classif
Name: eXtreme Gradient Boosting; Short name: xgboost
Class: classif.xgboost
Properties: twoclass,multiclass,numerics,prob,weights,missings,featimp
Predict-Type: response
Hyperparameters: nrounds=1,verbose=0,max_depth=5,lambda=0.171,eta=0.295,subsample=0.855,min_child_weight=5.54,colsample_bytree=0.735

> xgmodel = train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_learner <- makeLearner("classif.xgboost",predict.type = "response")
> xgb_learner$par.vals <- list(
+   objective = "binary:logistic",
+   eval_metric = "error",
+   nrounds = 150,
+   print.every.n = 50)
> xg_ps <- makeParamSet( 
+   makeIntegerParam("max_depth",lower=3,upper=10),
+   makeNumericParam("lambda",lower=0.05,upper=0.5),
+   makeNumericParam("eta", lower = 0.01, upper = 0.5),
+   makeNumericParam("subsample", lower = 0.50, upper = 1),
+   makeNumericParam("min_child_weight",lower=2,upper=10),
+   makeNumericParam("colsample_bytree",lower = 0.50,upper = 0.80))
> xgmodel = train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> train_task <- makeClassifTask(data = train, target = "income_level")
Warning in makeTask(type = type, data = data, weights = weights, blocking = blocking,  :
  Provided data is not a pure data.frame but from class data.table, hence it will be converted.
> test_task <- makeClassifTask(data = test, target = "income_level")
Warning in makeTask(type = type, data = data, weights = weights, blocking = blocking,  :
  Provided data is not a pure data.frame but from class data.table, hence it will be converted.
> train_task <- createDummyFeatures(obj = train_task)
> test_task <- createDummyFeatures(obj = test_task)
> xgmodel = train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgb_new <- setHyperPars(xgb_learner, par.vals = xgb_tune$x)
> xgmodel = train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> library(caret)
> xgmodel = train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> xgmodel = caret::train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> library(caret)
> library(data.table)
> library(mlr)
> library(xgboost)
> xgmodel = train(xgb_new, train_task)
Error in unique.default(x, nmax = nmax) : 
  unique() applies only to vectors
> (packages())
Error: could not find function "packages"
> (.packages())
 [1] "randomForest" "parallelMap"  "parallel"     "caret"        "ggplot2"      "lattice"      "xgboost"     
 [8] "mlr"          "ParamHelpers" "data.table"   "stats"        "graphics"     "grDevices"    "utils"       
[15] "datasets"     "methods"      "base"        
> detach("package:caret")
> detach("package:mlr")
> (.packages())
 [1] "randomForest" "parallelMap"  "parallel"     "ggplot2"      "lattice"      "xgboost"      "ParamHelpers"
 [8] "data.table"   "stats"        "graphics"     "grDevices"    "utils"        "datasets"     "methods"     
[15] "base"        
> library(caret)
> library(mlr)

载入程辑包：‘mlr’

The following object is masked from ‘package:caret’:

    train

Warning message:
程辑包‘mlr’是用R版本3.3.3 来建造的 
> xgmodel = train(xgb_new, train_task)
[1]	train-error:0.050866 
[51]	train-error:0.041344 
[101]	train-error:0.039279 
[150]	train-error:0.037895 
Warning message:
'print.every.n' is deprecated.
Use 'print_every_n' instead.
See help("Deprecated") and help("xgboost-deprecated"). 
> predict_xgb <- predict(xgmodel, test_task)
> xgb_prediction <- predict_xgb$data$response
> confusionMatrix(test$income_level, xgb_prediction)
Error in confusionMatrix.default(test$income_level, xgb_prediction) : 
  The data contain levels not found in the data.
> xgb_prediction
   [1] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [16] -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000
  [31] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000
  [46] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [61] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [76] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [91] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [106] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000
 [121] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [136] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [151] -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000
 [166] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [181] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [196] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [211] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [226] +50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [241] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [256] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000
 [271] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [286] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000
 [301] -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [316] -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [331] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [346] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000
 [361] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [376] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 +50000 -50000 -50000 -50000 -50000
 [391] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [406] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [421] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [436] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [451] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [466] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [481] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [496] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [511] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [526] -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [541] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [556] -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000
 [571] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [586] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000
 [601] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [616] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [631] -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [646] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [661] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000
 [676] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [691] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [706] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000
 [721] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [736] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [751] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000
 [766] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [781] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [796] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000
 [811] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [826] -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [841] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [856] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [871] -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000
 [886] -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000
 [901] +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [916] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000
 [931] +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [946] -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [961] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [976] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [991] -50000 -50000 -50000 -50000 -50000 +50000 -50000 -50000 -50000 -50000
 [ reached getOption("max.print") -- omitted 98762 entries ]
Levels: -50000 +50000
> confusionMatrix(test$income_level, xgb_prediction)
Error in confusionMatrix.default(test$income_level, xgb_prediction) : 
  The data contain levels not found in the data.
> confusionMatrix(xgb_prediction$data$response,xgb_prediction$data$truth)
Error in xgb_prediction$data : $ operator is invalid for atomic vectors
> xg_confused <- confusionMatrix(test$income_level,xgb_prediction)
Error in confusionMatrix.default(test$income_level, xgb_prediction) : 
  The data contain levels not found in the data.
> test$income_level
   [1] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
  [14] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
  [27] -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  50000+.
  [40] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
  [53] -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000 
  [66] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
  [79] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
  [92] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000 
 [105] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [118] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [131] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [144] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  50000+. -50000 
 [157] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [170] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [183] -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [196] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000 
 [209] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [222] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000 
 [235] -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [248] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [261] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [274] -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [287] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000 
 [300] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [313] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000 
 [326] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [339] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [352] -50000  -50000  50000+. 50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [365] -50000  -50000  -50000  50000+. -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [378] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [391] 50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [404] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [417] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [430] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [443] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [456] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [469] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [482] -50000  -50000  50000+. -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [495] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [508] -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000 
 [521] -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+.
 [534] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [547] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000 
 [560] -50000  -50000  50000+. -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [573] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [586] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [599] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [612] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [625] -50000  -50000  50000+. -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000 
 [638] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [651] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000 
 [664] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000 
 [677] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [690] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [703] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000 
 [716] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [729] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [742] -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [755] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [768] -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. 50000+. -50000  -50000  -50000  -50000 
 [781] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [794] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+.
 [807] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [820] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [833] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [846] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [859] -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+.
 [872] -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [885] -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [898] -50000  -50000  50000+. 50000+. -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [911] -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000 
 [924] 50000+. -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  50000+. -50000  -50000  -50000 
 [937] -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000 
 [950] 50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [963] -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000 
 [976] -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000 
 [989] -50000  -50000  -50000  -50000  -50000  -50000  -50000  50000+. -50000  -50000  -50000  -50000 
 [ reached getOption("max.print") -- omitted 98762 entries ]
Levels: -50000 50000+.
> test[,income_level:= ifelse(income_level == "-50000",-50000,+50000)]
> xg_confused <- confusionMatrix(test$income_level,xgb_prediction)
Error in confusionMatrix.default(test$income_level, xgb_prediction) : 
  The data contain levels not found in the data.
> test$income_level
   [1] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [16] -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [31] -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000
  [46] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000
  [61] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [76] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
  [91] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000
 [106] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [121] -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [136] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000
 [151] -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [166] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [181] -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [196] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000
 [211] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [226] -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000
 [241] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [256] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [271] -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [286] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000
 [301] -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [316] -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [331] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [346] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000  50000 -50000 -50000 -50000 -50000 -50000
 [361] -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000  50000 -50000 -50000 -50000 -50000
 [376] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000
 [391]  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [406] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [421] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [436] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [451] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000
 [466] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [481] -50000 -50000 -50000  50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [496] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [511]  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000  50000 -50000 -50000 -50000
 [526] -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [541] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [556] -50000  50000 -50000 -50000 -50000 -50000  50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000
 [571] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [586] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [601] -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [616] -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000
 [631] -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [646] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [661]  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000
 [676] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [691] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [706] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000
 [721] -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [736] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000
 [751] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000
 [766] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000  50000 -50000 -50000 -50000 -50000
 [781] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000
 [796] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000
 [811] -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [826] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000
 [841] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [856] -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [871]  50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [886] -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000
 [901]  50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000
 [916] -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000
 [931]  50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000
 [946] -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [961] -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000
 [976] -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000
 [991] -50000 -50000 -50000 -50000 -50000  50000 -50000 -50000 -50000 -50000
 [ reached getOption("max.print") -- omitted 98762 entries ]
> test[,income_level:= ifelse(income_level == "-50000","-50000","+50000")]
> test$income_level
   [1] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [12] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000"
  [23] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [34] "+50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [45] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [56] "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [67] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [78] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
  [89] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [100] "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [111] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [122] "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [133] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [144] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000"
 [155] "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [166] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [177] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000"
 [188] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [199] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000"
 [210] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [221] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [232] "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000"
 [243] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [254] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [265] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [276] "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [287] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [298] "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000"
 [309] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [320] "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [331] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [342] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [353] "-50000" "+50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [364] "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000"
 [375] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000"
 [386] "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [397] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [408] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [419] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [430] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [441] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [452] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000"
 [463] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [474] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000"
 [485] "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [496] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [507] "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [518] "-50000" "+50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [529] "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [540] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [551] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000"
 [562] "+50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [573] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [584] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [595] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [606] "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [617] "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000"
 [628] "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [639] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [650] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [661] "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [672] "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [683] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [694] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [705] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000"
 [716] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000"
 [727] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [738] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000"
 [749] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [760] "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [771] "-50000" "-50000" "-50000" "-50000" "+50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [782] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000"
 [793] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [804] "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000"
 [815] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [826] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [837] "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [848] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [859] "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [870] "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000"
 [881] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000"
 [892] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "+50000" "-50000"
 [903] "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000"
 [914] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "+50000"
 [925] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "+50000" "-50000" "-50000"
 [936] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000"
 [947] "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [958] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000"
 [969] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "-50000"
 [980] "-50000" "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000"
 [991] "-50000" "-50000" "-50000" "-50000" "-50000" "+50000" "-50000" "-50000" "-50000" "-50000"
 [ reached getOption("max.print") -- omitted 98762 entries ]
> xg_confused <- confusionMatrix(test$income_level,xgb_prediction)
> xg_confused
Confusion Matrix and Statistics

          Reference
Prediction -50000 +50000
    -50000  92699    877
    +50000   3433   2753
                                          
               Accuracy : 0.9568          
                 95% CI : (0.9555, 0.9581)
    No Information Rate : 0.9636          
    P-Value [Acc > NIR] : 1               
                                          
                  Kappa : 0.5398          
 Mcnemar's Test P-Value : <2e-16          
                                          
            Sensitivity : 0.9643          
            Specificity : 0.7584          
         Pos Pred Value : 0.9906          
         Neg Pred Value : 0.4450          
             Prevalence : 0.9636          
         Detection Rate : 0.9292          
   Detection Prevalence : 0.9380          
      Balanced Accuracy : 0.8613          
                                          
       'Positive' Class : -50000          
                                          